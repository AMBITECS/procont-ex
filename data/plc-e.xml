<?xml version='1.0' encoding='utf-8'?>
<project xmlns:ns1="http://www.plcopen.org/xml/tc6_0201" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.plcopen.org/xml/tc6_0201">
  <fileHeader companyName="Ambitecs" productName="Procont" productVersion="1" creationDateTime="2024-10-01T00:00:00"/>
  <contentHeader name="Development project" modificationDateTime="2024-10-01T00:00:00">
    <coordinateInfo>
      <fbd>
        <scaling x="0" y="0"/>
      </fbd>
      <ld>
        <scaling x="0" y="0"/>
      </ld>
      <sfc>
        <scaling x="0" y="0"/>
      </sfc>
    </coordinateInfo>
  </contentHeader>
  <types>
    <dataTypes>
      <dataType name="datatype0">
        <baseType>
          <struct>
            <variable name="id">
              <type>
                <DINT/>
              </type>
              <initialValue>
                <simpleValue value="1"/>
              </initialValue>
            </variable>
            <variable name="lvl">
              <type>
                <DINT/>
              </type>
              <initialValue>
                <simpleValue value="2"/>
              </initialValue>
            </variable>
            <variable name="make">
              <type>
                <DINT/>
              </type>
              <initialValue>
                <simpleValue value="3"/>
              </initialValue>
            </variable>
          </struct>
        </baseType>
      </dataType>
    </dataTypes>
    <pous>
      <pou name="AverageVal" pouType="function">
        <interface>
          <returnType>
            <REAL/>
          </returnType>
          <inputVars>
            <variable name="Cnt1">
              <type>
                <INT/>
              </type>
            </variable>
            <variable name="Cnt2">
              <type>
                <INT/>
              </type>
            </variable>
            <variable name="Cnt3">
              <type>
                <INT/>
              </type>
            </variable>
            <variable name="Cnt4">
              <type>
                <INT/>
              </type>
            </variable>
            <variable name="Cnt5">
              <type>
                <INT/>
              </type>
            </variable>
          </inputVars>
          <localVars>
            <variable name="InputsNumber">
              <type>
                <REAL/>
              </type>
              <initialValue>
                <simpleValue value="5.0"/>
              </initialValue>
              <documentation>
                <xhtml:p><![CDATA[Количество входных значений]]></xhtml:p>
              </documentation>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[AverageVal := INT_TO_REAL(Cnt1+Cnt2+Cnt3+Cnt4+Cnt5)/InputsNumber;]]></xhtml:p>
          </ST>
        </body>
      </pou>
      <pou name="plc_prg" pouType="program">
        <interface>
          <inputVars>
            <variable name="Reset">
              <type>
                <BOOL/>
              </type>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="Cnt1">
              <type>
                <INT/>
              </type>
            </variable>
            <variable name="Cnt2">
              <type>
                <INT/>
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="CounterST0">
              <type>
                <derived name="CounterST"/>
              </type>
            </variable>
            <variable name="CounterFBD0">
              <type>
                <derived name="CounterFBD"/>
              </type>
            </variable>
            <variable name="AVCnt">
              <type>
                <REAL/>
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <FBD>
            <block localId="1" typeName="CounterST" instanceName="CounterST0" executionOrderId="0" height="60" width="125">
              <position x="207" y="53"/>
              <inputVariables>
                <variable formalParameter="Reset">
                  <connectionPointIn>
                    <relPosition x="0" y="40"/>
                    <connection refLocalId="2">
                      <position x="207" y="93"/>
                      <position x="114" y="93"/>
                    </connection>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="OUT">
                  <connectionPointOut>
                    <relPosition x="125" y="40"/>
                  </connectionPointOut>
                </variable>
              </outputVariables>
            </block>
            <inVariable localId="2" executionOrderId="0" height="30" width="79" negated="false">
              <position x="35" y="78"/>
              <connectionPointOut>
                <relPosition x="79" y="15"/>
              </connectionPointOut>
              <expression>Reset</expression>
            </inVariable>
            <block localId="4" typeName="CounterFBD" instanceName="CounterFBD0" executionOrderId="0" height="54" width="121">
              <position x="211" y="146"/>
              <inputVariables>
                <variable formalParameter="Reset">
                  <connectionPointIn>
                    <relPosition x="0" y="37"/>
                    <connection refLocalId="13">
                      <position x="211" y="183"/>
                      <position x="115" y="183"/>
                    </connection>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="OUT">
                  <connectionPointOut>
                    <relPosition x="121" y="37"/>
                  </connectionPointOut>
                </variable>
              </outputVariables>
            </block>
            <comment localId="6" height="193" width="569">
              <position x="620" y="130"/>
              <content>
                <xhtml:p><![CDATA[In this example function block with the same functionality 
is created using all five IEC 61131-3 programing languages:
- IL;
- FBD.



Function block is a counter with reset control input.
If reset is True counter value is reset to the value defined by
global configuration constant ResetCounterValue. 
If reset is False, counter is incremented every cycle.
]]></xhtml:p>
              </content>
            </comment>
            <inVariable localId="13" executionOrderId="0" height="30" width="79" negated="false">
              <position x="36" y="168"/>
              <connectionPointOut>
                <relPosition x="79" y="15"/>
              </connectionPointOut>
              <expression>Reset</expression>
            </inVariable>
            <block localId="17" typeName="AverageVal" executionOrderId="0" height="470" width="100">
              <position x="514" y="28"/>
              <inputVariables>
                <variable formalParameter="Cnt1">
                  <connectionPointIn>
                    <relPosition x="0" y="65"/>
                    <connection refLocalId="3">
                      <position x="514" y="93"/>
                      <position x="474" y="93"/>
                    </connection>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Cnt2">
                  <connectionPointIn>
                    <relPosition x="0" y="155"/>
                    <connection refLocalId="5">
                      <position x="514" y="183"/>
                      <position x="473" y="183"/>
                    </connection>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Cnt3">
                  <connectionPointIn>
                    <relPosition x="0" y="245"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Cnt4">
                  <connectionPointIn>
                    <relPosition x="0" y="335"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Cnt5">
                  <connectionPointIn>
                    <relPosition x="0" y="425"/>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="OUT">
                  <connectionPointOut>
                    <relPosition x="100" y="65"/>
                  </connectionPointOut>
                </variable>
              </outputVariables>
            </block>
            <outVariable localId="18" executionOrderId="0" height="30" width="55" negated="false">
              <position x="649" y="78"/>
              <connectionPointIn>
                <relPosition x="0" y="15"/>
                <connection refLocalId="17" formalParameter="OUT">
                  <position x="649" y="93"/>
                  <position x="614" y="93"/>
                </connection>
              </connectionPointIn>
              <expression>AVCnt</expression>
            </outVariable>
            <inOutVariable localId="3" executionOrderId="0" height="30" width="106" negatedOut="false" negatedIn="false">
              <position x="368" y="78"/>
              <connectionPointIn>
                <relPosition x="0" y="15"/>
                <connection refLocalId="1" formalParameter="OUT">
                  <position x="368" y="93"/>
                  <position x="332" y="93"/>
                </connection>
              </connectionPointIn>
              <connectionPointOut>
                <relPosition x="106" y="15"/>
              </connectionPointOut>
              <expression>Cnt1</expression>
            </inOutVariable>
            <inOutVariable localId="5" executionOrderId="0" height="30" width="103" negatedOut="false" negatedIn="false">
              <position x="370" y="168"/>
              <connectionPointIn>
                <relPosition x="0" y="15"/>
                <connection refLocalId="4" formalParameter="OUT">
                  <position x="370" y="183"/>
                  <position x="332" y="183"/>
                </connection>
              </connectionPointIn>
              <connectionPointOut>
                <relPosition x="103" y="15"/>
              </connectionPointOut>
              <expression>Cnt2</expression>
            </inOutVariable>
          </FBD>
        </body>
      </pou>
      <pou name="CounterST" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="Reset">
              <type>
                <BOOL/>
              </type>
            </variable>
          </inputVars>
          <localVars>
            <variable name="Cnt">
              <type>
                <INT/>
              </type>
            </variable>
          </localVars>
          <outputVars>
            <variable name="OUT">
              <type>
                <INT/>
              </type>
            </variable>
          </outputVars>
          <externalVars constant="true">
            <variable name="ResetCounterValue">
              <type>
                <INT/>
              </type>
            </variable>
          </externalVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[IF Reset THEN
  Cnt := ResetCounterValue;
ELSE
  Cnt := Cnt + 1;
END_IF;

Out := Cnt;]]></xhtml:p>
          </ST>
        </body>
      </pou>
      <pou name="CounterFBD" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="Reset">
              <type>
                <BOOL/>
              </type>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="OUT">
              <type>
                <INT/>
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="Cnt">
              <type>
                <INT/>
              </type>
            </variable>
          </localVars>
          <externalVars constant="true">
            <variable name="ResetCounterValue">
              <type>
                <INT/>
              </type>
            </variable>
          </externalVars>
        </interface>
        <body>
          <FBD>
            <inVariable localId="1" executionOrderId="0" height="30" width="61" negated="false">
              <position x="321" y="58"/>
              <connectionPointOut>
                <relPosition x="61" y="15"/>
              </connectionPointOut>
              <expression>Reset</expression>
            </inVariable>
            <outVariable localId="2" executionOrderId="0" height="30" width="39" negated="false">
              <position x="675" y="137"/>
              <connectionPointIn>
                <relPosition x="0" y="15"/>
                <connection refLocalId="3">
                  <position x="675" y="152"/>
                  <position x="589" y="152"/>
                </connection>
              </connectionPointIn>
              <expression>OUT</expression>
            </outVariable>
            <inOutVariable localId="3" executionOrderId="0" height="30" width="37" negatedOut="false" negatedIn="false">
              <position x="557" y="137"/>
              <connectionPointIn>
                <relPosition x="0" y="15"/>
                <connection refLocalId="7" formalParameter="OUT">
                  <position x="557" y="152"/>
                  <position x="527" y="152"/>
                  <position x="527" y="130"/>
                  <position x="517" y="130"/>
                </connection>
              </connectionPointIn>
              <connectionPointOut>
                <relPosition x="37" y="15"/>
              </connectionPointOut>
              <expression>Cnt</expression>
            </inOutVariable>
            <block localId="4" typeName="ADD" executionOrderId="0" height="80" width="69">
              <position x="328" y="115"/>
              <inputVariables>
                <variable formalParameter="IN1">
                  <connectionPointIn>
                    <relPosition x="0" y="35"/>
                    <connection refLocalId="6">
                      <position x="328" y="150"/>
                      <position x="275" y="150"/>
                    </connection>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="IN2">
                  <connectionPointIn>
                    <relPosition x="0" y="65"/>
                    <connection refLocalId="3">
                      <position x="328" y="180"/>
                      <position x="317" y="180"/>
                      <position x="317" y="213"/>
                      <position x="604" y="213"/>
                      <position x="604" y="152"/>
                      <position x="594" y="152"/>
                    </connection>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="OUT">
                  <connectionPointOut>
                    <relPosition x="69" y="35"/>
                  </connectionPointOut>
                </variable>
              </outputVariables>
            </block>
            <inVariable localId="5" executionOrderId="0" height="30" width="163" negated="false">
              <position x="222" y="256"/>
              <connectionPointOut>
                <relPosition x="163" y="15"/>
              </connectionPointOut>
              <expression>ResetCounterValue</expression>
            </inVariable>
            <inVariable localId="6" executionOrderId="0" height="30" width="21" negated="false">
              <position x="254" y="135"/>
              <connectionPointOut>
                <relPosition x="21" y="15"/>
              </connectionPointOut>
              <expression>1</expression>
            </inVariable>
            <block localId="7" typeName="SEL" executionOrderId="0" height="80" width="69">
              <position x="448" y="100"/>
              <inputVariables>
                <variable formalParameter="G">
                  <connectionPointIn>
                    <relPosition x="0" y="30"/>
                    <connection refLocalId="1">
                      <position x="448" y="130"/>
                      <position x="415" y="130"/>
                      <position x="415" y="73"/>
                      <position x="382" y="73"/>
                    </connection>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="IN0">
                  <connectionPointIn>
                    <relPosition x="0" y="50"/>
                    <connection refLocalId="4" formalParameter="OUT">
                      <position x="448" y="150"/>
                      <position x="397" y="150"/>
                    </connection>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="IN1">
                  <connectionPointIn>
                    <relPosition x="0" y="70"/>
                    <connection refLocalId="5">
                      <position x="448" y="170"/>
                      <position x="414" y="170"/>
                      <position x="414" y="271"/>
                      <position x="385" y="271"/>
                    </connection>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="OUT">
                  <connectionPointOut>
                    <relPosition x="69" y="30"/>
                  </connectionPointOut>
                </variable>
              </outputVariables>
            </block>
          </FBD>
        </body>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations>
      <configuration name="config">
        <resource name="resource1">
          <task name="plc_task" priority="1" interval="T#100ms">
            <pouInstance name="plc_task_instance" typeName="plc_prg"/>
          </task>
        </resource>
        <globalVars constant="true">
          <variable name="ResetCounterValue">
            <type>
              <INT/>
            </type>
            <initialValue>
              <simpleValue value="17"/>
            </initialValue>
          </variable>
        </globalVars>
      </configuration>
      <configuration name="config2">
        <resource name="resource1">
          <task name="plc_task" priority="1" interval="T#100ms">
            <pouInstance name="plc_task_instance" typeName="plc_prg"/>
          </task>
        </resource>
        <globalVars constant="true">
          <variable name="ResetCounterValue">
            <type>
              <INT/>
            </type>
            <initialValue>
              <simpleValue value="17"/>
            </initialValue>
          </variable>
        </globalVars>
      </configuration>
      <configuration name="config3">
        <resource name="resource1">
          <task name="plc_task" priority="1" interval="T#100ms">
            <pouInstance name="plc_task_instance" typeName="plc_prg"/>
          </task>
        </resource>
        <globalVars constant="true">
          <variable name="ResetCounterValue">
            <type>
              <INT/>
            </type>
            <initialValue>
              <simpleValue value="17"/>
            </initialValue>
          </variable>
        </globalVars>
      </configuration>
    </configurations>
  </instances>
</project>
